# What is CME CloudPurchase?

![CME CloudPurchase](assets/hero.png)

## <a id="overview"></a> Overview

**CME CloudPurchase** is a **Unity** extension for server-side processing of in-game payments in your **AWS** cloud environment.

Основное отличие от подобных систем — полный контроль и значительная экономия за счет **модернового** подхода к развертыванию облака в **AWS**. Звучит интригующе и сложно? Мы подготовили подробные [инструкции](user_guide/getting_started.md) как завести и настроить новый аккаунт, а сам процесс разворачивания облачной инфраструктуры происходит из интерфейса Unity всего за пару кликов. 

В итоге вы получаете серверное решение развернутое в собственном облаке, без еще-одной-странной-подписки и с безграничными возможностями по расширению функционала!

**Topics**

- [CME CloudPurchase features](#features)
- [How CME CloudPurchase works](#how-it-works)
- [CME CloudPurchase costs](#costs)

## <a id="features"></a> CME CloudPurchase features

- [Проверка корректности платежей](#feature-1)
- [Идентификация тестовых платежей](#feature-2)
- [Отслеживание истории платежей](#feature-3)
- [Управление средами развертывания](#feature-4)
- [Расширение и модификация](#feature-5)

### <a id="feature-1"></a> Проверка корректности платежей

Для более надежного подтверждения корректности внутриигровых покупок **CME CloudPurchase** производит проверку используя специальные API для каждой из поддерживаемых платформ.

На данный момент подерживаются **Google Play Store** и **Apple App Store**.

Подробнее про интеграцию с платформами, смотрите раздел [Getting Started / Configure stores integrations](user_guide/getting_started.md#stores) в руководстве пользователя.

### <a id="feature-2"></a> Идентификация тестовых платежей

Для обоснованного принятия решений **CME CloudPurchase** помогает отделить тестовые платежи, и, при возможности, повторные покупки.

Подробнее о механике проверки платежей и работы, смотрите раздел [Making Validation Requests](user_guide/making_validation_requests.md) в руководстве разработчика.

### <a id="feature-3"></a> Отслеживание истории платежей

За счет специального формата логирования и метрик в **Amazon CloudWatch**, **CME CloudPurchase** позволяют наблюдать платежи в реальном времени, а так же выгрузить всю историю платежей для дальнейшего анализа.

Подробнее о статистике использоваания и наблюдении облачного приложения, смотрите раздел [Usage Statistics and Monitoring](user_guide/usage_statistics.md) в руководстве пользователя.

### <a id="feature-4"></a> Управление средами развертывания

Для удобства проверки конфигурации облачного приложения **CME CloudPurchase** порзволяет переключаться между тестовой и основной средой эксплуатации прямо из **Unity Editor**.

Подробнее о развертывании в облаке, смотрите раздел [Managing Cloud Environments](user_guide/managing_cloud_environments.md) в руководстве разработчика.

### <a id="feature-5"></a> Расширение и модификация

Для "бесшовной" интеграции с логикой вашего приложения практически вся логика в `Assets/CME` подробно документирована и открыта к адаптации. 

Облачная логика организована в специальный solution `Cloud/Cloud.sln` организована в проекты 

- `CME.CloudPurchase/CME.CloudPurchase.csproj` содержащий runtime логику серверного приложения.
- `CME.CloudDefinition/CME.CloudDefinition.csproj` содержащий логику развертывания облачной инфраструктуры.

## <a id="how-it-works"></a> How CME CloudPurchase works

![!](assets/architecture.jpg)

Расширение состоит из двух частей:

1. Готовый к использованию C# код клиентской и серверной обработки платежей;
2. Инструменты развертывания облачного приложения встроенные в **Unity Editor**.

Обработка каждого платежа в рамках сценария совершения покупки происходит за счет вызова к **облачному приложению** развернутого в выбранной **среде**.

Вызов производиться с использованием [клиентской библиотеки](api_reference/namespaces.md) встраиваемой в игру.

Выбор среды производится в специальном окне расширения **Unity Editor** перед сборкой или запуском приложения.

### Облачное приложение

Облачное приложение это набор связанных компонетов **AWS** минимально необходимых для проверки, хранения и наблюдения истории платежей.

### Среда развертывания

Приложение разделено на именованные среды для возможности безопасного тестирования конфигураций и расширений облачного приложения.

## <a id="costs"></a> CME CloudPurchase costs

**CME CloudPurchase** очень экономно использует ресурсы **AWS** и [попадает с большым запасом](https://calculator.aws/#/estimate?id=173c99261f287852c34cb50214c1fe6c34f4e14b){target=_blank} в ограничения **AWS Free Tier**.

Поэтому при использовании [триальной версии](https://assetstore.unity.com/preview/224130/709634){target=_blank} **CME CloudPurchase** будет для вас полностью бесплатен.

При невозможности использовать **AWS Free Tier** стоимсть эксплуалтации [остается крайне эффективной](https://calculator.aws/#/estimate?id=4146e963f41967449d736e1a9b1d80cadda074a1){target=_blank}. 
